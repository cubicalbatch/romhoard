<div class="retro-modal-header retro-header-red">
    <h3>Delete Scan Path</h3>
    <button type="button" @click="$store.modals.close('delete-scan-path-{{ scan_path.pk }}')" class="retro-modal-close">&times;</button>
</div>
<div class="retro-modal-body">
    <p class="mb-4 text-[var(--color-text)]">
        Are you sure you want to delete this scan path?
    </p>
    <div class="font-mono text-base text-[var(--color-text-muted)] bg-[var(--color-bg)] p-2 mb-4 break-all">
        {{ scan_path.path }}
    </div>

    {% if rom_count > 0 %}
    <div class="bg-[var(--color-warning)]/10 border border-[var(--color-warning)] p-3 mb-4">
        <p class="font-semibold text-[var(--color-warning)] mb-2">The following will be deleted from the database:</p>
        <ul class="list-disc list-inside text-base text-[var(--color-text)] space-y-1">
            <li>{{ rom_count }} ROM{{ rom_count|pluralize }}</li>
            {% if romset_count > 0 %}
            <li>{{ romset_count }} ROMSet{{ romset_count|pluralize }}</li>
            {% endif %}
            {% if game_count > 0 %}
            <li>{{ game_count }} Game{{ game_count|pluralize }}</li>
            {% endif %}
            {% if image_count > 0 %}
            <li>{{ image_count }} downloaded image{{ image_count|pluralize }} (files will be removed from disk)</li>
            {% endif %}
        </ul>
        <p class="mt-3 text-base text-[var(--color-text-muted)]">
            ROM files on disk will NOT be deleted.
        </p>
    </div>
    {% else %}
    <p class="text-[var(--color-text-muted)] mb-4">
        No ROMs are associated with this path.
    </p>
    {% endif %}
</div>
<div class="retro-modal-footer">
    <button
        type="button"
        @click="$store.modals.close('delete-scan-path-{{ scan_path.pk }}')"
        class="retro-btn retro-btn-secondary"
    >
        Cancel
    </button>
    <form
        method="post"
        action="{% url 'library:delete_scan_path' scan_path.pk %}"
        hx-post="{% url 'library:delete_scan_path' scan_path.pk %}"
        hx-target="#saved-paths-section"
        hx-swap="outerHTML"
        @htmx:after-request="$store.modals.close('delete-scan-path-{{ scan_path.pk }}')"
        class="inline"
    >
        {% csrf_token %}
        <button
            type="submit"
            class="retro-btn retro-btn-danger"
        >
            Delete
        </button>
    </form>
</div>
